{"version":3,"file":"slick-router.js","sources":["../lib/utils.js","../lib/invariant.js","../lib/function-dsl.js","../lib/array-dsl.js","../lib/path.js","../lib/events.js","../lib/locations/location-bar.js","../lib/locations/browser.js","../lib/locations/memory.js","../lib/constants.js","../lib/transition.js","../lib/links.js","../lib/logger.js","../lib/qs.js","../lib/router.js"],"sourcesContent":["const assoc = (obj, attr, val) => { obj[attr] = val; return obj }\r\nconst isArray = Array.isArray\r\n\r\nexport const keys = Object.keys\r\n\r\nexport const clone = obj =>\r\n  obj\r\n    ? isArray(obj)\r\n      ? obj.slice(0)\r\n      : extend({}, obj)\r\n    : obj\r\n\r\nexport const pick = (obj, attrs) =>\r\n  attrs.reduce((acc, attr) =>\r\n    obj[attr] === undefined\r\n      ? acc\r\n      : assoc(acc, attr, obj[attr]), {})\r\n\r\nexport const isEqual = (obj1, obj2) => {\r\n  const keys1 = keys(obj1)\r\n  return keys1.length === keys(obj2).length &&\r\n    keys1.every(key => obj2[key] === obj1[key])\r\n}\r\n\r\nexport const extend = Object.assign\r\n","export default function invariant (condition, format, ...args) {\r\n  if (!condition) {\r\n    let argIndex = 0\r\n    throw new Error(\r\n      'Invariant Violation: ' +\r\n      format.replace(/%s/g, () => args[argIndex++])\r\n    )\r\n  }\r\n}\r\n","/* eslint-disable standard/no-callback-literal */\r\nimport invariant from './invariant'\r\n\r\nexport default function functionDsl (callback) {\r\n  let ancestors = []\r\n  const matches = {}\r\n  const names = {}\r\n\r\n  callback(function route (name, options, childrenCallback) {\r\n    let routes\r\n\r\n    invariant(!names[name], 'Route names must be unique, but route \"%s\" is declared multiple times', name)\r\n\r\n    names[name] = true\r\n\r\n    if (arguments.length === 1) {\r\n      options = {}\r\n    }\r\n\r\n    if (arguments.length === 2 && typeof options === 'function') {\r\n      childrenCallback = options\r\n      options = {}\r\n    }\r\n\r\n    if (typeof options.path !== 'string') {\r\n      const parts = name.split('.')\r\n      options.path = parts[parts.length - 1]\r\n    }\r\n\r\n    // go to the next level\r\n    if (childrenCallback) {\r\n      ancestors = ancestors.concat(name)\r\n      childrenCallback()\r\n      routes = pop()\r\n      ancestors.splice(-1)\r\n    }\r\n\r\n    // add the node to the tree\r\n    push({\r\n      name: name,\r\n      path: options.path,\r\n      routes: routes || [],\r\n      options: options\r\n    })\r\n  })\r\n\r\n  function pop () {\r\n    return matches[currentLevel()] || []\r\n  }\r\n\r\n  function push (route) {\r\n    const level = currentLevel()\r\n    matches[level] = matches[level] || []\r\n    matches[level].push(route)\r\n  }\r\n\r\n  function currentLevel () {\r\n    return ancestors.join('.')\r\n  }\r\n\r\n  return pop()\r\n}\r\n","\r\nexport default function arrayDsl (routes) {\r\n  const result = []\r\n\r\n  routes.forEach(({ name, children, ...options }) => {\r\n    if (typeof options.path !== 'string') {\r\n      const parts = name.split('.')\r\n      options.path = parts[parts.length - 1]\r\n    }\r\n    result.push(\r\n      {\r\n        name,\r\n        path: options.path,\r\n        options,\r\n        routes: children ? arrayDsl(children) : []\r\n      }\r\n    )\r\n  })\r\n\r\n  return result\r\n}\r\n","import invariant from './invariant'\r\nimport { pathToRegexp } from 'path-to-regexp'\r\n\r\nconst paramInjectMatcher = /:([a-zA-Z_$][a-zA-Z0-9_$?]*[?+*]?)/g\r\nconst specialParamChars = /[+*?]$/g\r\nconst queryMatcher = /\\?(.+)/\r\n\r\nconst _compiledPatterns = {}\r\n\r\nfunction compilePattern (pattern) {\r\n  if (!(pattern in _compiledPatterns)) {\r\n    const paramNames = []\r\n    const re = pathToRegexp(pattern, paramNames)\r\n\r\n    _compiledPatterns[pattern] = {\r\n      matcher: re,\r\n      paramNames: paramNames.map(p => p.name)\r\n    }\r\n  }\r\n\r\n  return _compiledPatterns[pattern]\r\n}\r\n\r\n/**\r\n * Returns an array of the names of all parameters in the given pattern.\r\n */\r\nexport function extractParamNames (pattern) {\r\n  return compilePattern(pattern).paramNames\r\n}\r\n\r\n/**\r\n * Extracts the portions of the given URL path that match the given pattern\r\n * and returns an object of param name => value pairs. Returns null if the\r\n * pattern does not match the given path.\r\n */\r\nexport function extractParams (pattern, path) {\r\n  const cp = compilePattern(pattern)\r\n  const matcher = cp.matcher\r\n  const paramNames = cp.paramNames\r\n  const match = path.match(matcher)\r\n\r\n  if (!match) {\r\n    return null\r\n  }\r\n\r\n  const params = {}\r\n\r\n  paramNames.forEach(function (paramName, index) {\r\n    params[paramName] = match[index + 1] && decodeURIComponent(match[index + 1])\r\n  })\r\n\r\n  return params\r\n}\r\n\r\n/**\r\n * Returns a version of the given route path with params interpolated. Throws\r\n * if there is a dynamic segment of the route path for which there is no param.\r\n */\r\nexport function injectParams (pattern, params) {\r\n  params = params || {}\r\n\r\n  return pattern.replace(paramInjectMatcher, function (match, param) {\r\n    const paramName = param.replace(specialParamChars, '')\r\n    const lastChar = param.slice(-1)\r\n\r\n    // If param is optional don't check for existence\r\n    if (lastChar === '?' || lastChar === '*') {\r\n      if (params[paramName] == null) {\r\n        return ''\r\n      }\r\n    } else {\r\n      invariant(\r\n        params[paramName] != null,\r\n        \"Missing '%s' parameter for path '%s'\",\r\n        paramName, pattern\r\n      )\r\n    }\r\n\r\n    let paramValue = encodeURIComponent(params[paramName])\r\n    if (lastChar === '*' || lastChar === '+') {\r\n      // restore / for splats\r\n      paramValue = paramValue.replace('%2F', '/')\r\n    }\r\n    return paramValue\r\n  })\r\n}\r\n\r\n/**\r\n * Returns an object that is the result of parsing any query string contained\r\n * in the given path, null if the path contains no query string.\r\n */\r\nexport function extractQuery (qs, path) {\r\n  const match = path.match(queryMatcher)\r\n  return match && qs.parse(match[1])\r\n}\r\n\r\n/**\r\n * Returns a version of the given path with the parameters in the given\r\n * query merged into the query string.\r\n */\r\nexport function withQuery (qs, path, query) {\r\n  const queryString = qs.stringify(query, { indices: false })\r\n\r\n  if (queryString) {\r\n    return withoutQuery(path) + '?' + queryString\r\n  }\r\n\r\n  return path\r\n}\r\n\r\n/**\r\n * Returns a version of the given path without the query string.\r\n */\r\nexport function withoutQuery (path) {\r\n  return path.replace(queryMatcher, '')\r\n}\r\n","/**\r\n* Bind `el` event `type` to `fn`.\r\n*\r\n* @param {Element} el\r\n* @param {String} type\r\n* @param {Function} fn\r\n* @return {Function}\r\n* @api public\r\n*/\r\n\r\nexport function bindEvent (el, type, fn) {\r\n  el.addEventListener(type, fn)\r\n  return fn\r\n}\r\n\r\n/**\r\n* Unbind `el` event `type`'s callback `fn`.\r\n*\r\n* @param {Element} el\r\n* @param {String} type\r\n* @param {Function} fn\r\n* @return {Function}\r\n* @api public\r\n*/\r\n\r\nexport function unbindEvent (el, type, fn) {\r\n  el.removeEventListener(type, fn)\r\n  return fn\r\n}\r\n","/* eslint-disable */\r\n// LocationBar module extracted from Backbone.js 1.1.0\r\n//\r\n// the dependency on backbone, underscore and jquery have been removed to turn\r\n// this into a small standalone library for handling browser's history API\r\n// cross browser and with a fallback to hashchange events or polling.\r\n\r\nimport {extend} from '../utils.js'\r\nimport {bindEvent, unbindEvent} from '../events.js'\r\n\r\n// this is mostly original code with minor modifications\r\n// to avoid dependency on 3rd party libraries\r\n//\r\n// Backbone.History\r\n// ----------------\r\n\r\n// Handles cross-browser history management, based on either\r\n// [pushState](http://diveintohtml5.info/history.html) and real URLs, or\r\n// [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)\r\n// and URL fragments.\r\nclass History {\r\n  constructor() {\r\n    this.handlers = [];\r\n    this.checkUrl = this.checkUrl.bind(this);\r\n    this.location = window.location;\r\n    this.history = window.history;\r\n  }\r\n\r\n  // Set up all inheritable **Backbone.History** properties and methods.\r\n  // Are we at the app root?\r\n  atRoot() {\r\n    return this.location.pathname.replace(/[^\\/]$/, '$&/') === this.root;\r\n  }\r\n\r\n  // Gets the true hash value. Cannot use location.hash directly due to bug\r\n  // in Firefox where location.hash will always be decoded.\r\n  getHash() {\r\n    const match = this.location.href.match(/#(.*)$/);\r\n    return match ? match[1] : '';\r\n  }\r\n\r\n  // Get the cross-browser normalized URL fragment, either from the URL,\r\n  // the hash, or the override.\r\n  getFragment(fragment, forcePushState) {\r\n    if (fragment == null) {\r\n      if (this._hasPushState || !this._wantsHashChange || forcePushState) {\r\n        fragment = decodeURI(this.location.pathname + this.location.search);\r\n        const root = this.root.replace(trailingSlash, '');\r\n        if (!fragment.indexOf(root)) fragment = fragment.slice(root.length);\r\n      } else {\r\n        fragment = this.getHash();\r\n      }\r\n    }\r\n    return fragment.replace(routeStripper, '');\r\n  }\r\n\r\n  // Start the hash change handling, returning `true` if the current URL matches\r\n  // an existing route, and `false` otherwise.\r\n  start(options = {}) {\r\n    // MODIFICATION OF ORIGINAL BACKBONE.HISTORY\r\n    // if (History.started) throw new Error(\"LocationBar has already been started\");\r\n    // History.started = true;\r\n    this.started = true;\r\n\r\n    // Figure out the initial configuration.\r\n    // Is pushState desired ... is it available?\r\n    this.options          = extend({root: '/'}, options);\r\n    this.location         = this.options.location || this.location;\r\n    this.history          = this.options.history || this.history;\r\n    this.root             = this.options.root;\r\n    this._wantsHashChange = this.options.hashChange !== false;\r\n    this._wantsPushState  = !!this.options.pushState;\r\n    this._hasPushState    = this._wantsPushState;\r\n    const fragment        = this.getFragment();\r\n\r\n    // Normalize root to always include a leading and trailing slash.\r\n    this.root = (`/${this.root}/`).replace(rootStripper, '/');\r\n\r\n    // Depending on whether we're using pushState or hashes, and whether\r\n    // 'onhashchange' is supported, determine how we check the URL state.\r\n    bindEvent(window, this._hasPushState ? 'popstate' : 'hashchange', this.checkUrl);\r\n\r\n    // Determine if we need to change the base url, for a pushState link\r\n    // opened by a non-pushState browser.\r\n    this.fragment = fragment;\r\n    const loc = this.location;\r\n\r\n    // Transition from hashChange to pushState or vice versa if both are\r\n    // requested.\r\n    if (this._wantsHashChange && this._wantsPushState) {\r\n\r\n      // If we've started off with a route from a `pushState`-enabled\r\n      // browser, but we're currently in a browser that doesn't support it...\r\n      if (!this._hasPushState && !this.atRoot()) {\r\n        this.fragment = this.getFragment(null, true);\r\n        this.location.replace(`${this.root}#${this.fragment}`);\r\n        // Return immediately as browser will do redirect to new url\r\n        return true;\r\n\r\n      // Or if we've started out with a hash-based route, but we're currently\r\n      // in a browser where it could be `pushState`-based instead...\r\n      } else if (this._hasPushState && this.atRoot() && loc.hash) {\r\n        this.fragment = this.getHash().replace(routeStripper, '');\r\n        this.history.replaceState({}, document.title, this.root + this.fragment);\r\n      }\r\n\r\n    }\r\n\r\n    if (!this.options.silent) return this.loadUrl();\r\n  }\r\n\r\n  // Disable Backbone.history, perhaps temporarily. Not useful in a real app,\r\n  // but possibly useful for unit testing Routers.\r\n  stop() {\r\n    unbindEvent(window, this._hasPushState ? 'popstate' : 'hashchange', this.checkUrl);\r\n    this.started = false;\r\n  }\r\n\r\n  // Add a route to be tested when the fragment changes. Routes added later\r\n  // may override previous routes.\r\n  route(route, callback) {\r\n    this.handlers.unshift({route, callback});\r\n  }\r\n\r\n  // Checks the current URL to see if it has changed, and if it has,\r\n  // calls `loadUrl`.\r\n  checkUrl() {\r\n    const current = this.getFragment();\r\n    if (current === this.fragment) return false;\r\n    this.loadUrl();\r\n  }\r\n\r\n  // Attempt to load the current URL fragment. If a route succeeds with a\r\n  // match, returns `true`. If no defined routes matches the fragment,\r\n  // returns `false`.\r\n  loadUrl(fragment) {\r\n    fragment = this.fragment = this.getFragment(fragment);\r\n    return this.handlers.some(handler => {\r\n      if (handler.route.test(fragment)) {\r\n        handler.callback(fragment);\r\n        return true;\r\n      }\r\n    });\r\n  }\r\n\r\n  // Save a fragment into the hash history, or replace the URL state if the\r\n  // 'replace' option is passed. You are responsible for properly URL-encoding\r\n  // the fragment in advance.\r\n  //\r\n  // The options object can contain `trigger: true` if you wish to have the\r\n  // route callback be fired (not usually desirable), or `replace: true`, if\r\n  // you wish to modify the current URL without adding an entry to the history.\r\n  update(fragment, options) {\r\n    if (!this.started) return false;\r\n    if (!options || options === true) options = {trigger: !!options};\r\n\r\n    let url = this.root + (fragment = this.getFragment(fragment || ''));\r\n\r\n    // Strip the hash for matching.\r\n    fragment = fragment.replace(pathStripper, '');\r\n\r\n    if (this.fragment === fragment) return;\r\n    this.fragment = fragment;\r\n\r\n    // Don't include a trailing slash on the root.\r\n    if (fragment === '' && url !== '/') url = url.slice(0, -1);\r\n\r\n    // If pushState is available, we use it to set the fragment as a real URL.\r\n    if (this._hasPushState) {\r\n      this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\r\n\r\n    // If hash changes haven't been explicitly disabled, update the hash\r\n    // fragment to store history.\r\n    } else if (this._wantsHashChange) {\r\n      this._updateHash(this.location, fragment, options.replace);\r\n    // If you've told us that you explicitly don't want fallback hashchange-\r\n    // based history, then `update` becomes a page refresh.\r\n    } else {\r\n      return this.location.assign(url);\r\n    }\r\n    if (options.trigger) return this.loadUrl(fragment);\r\n  }\r\n\r\n  // Update the hash location, either replacing the current entry, or adding\r\n  // a new one to the browser history.\r\n  _updateHash(location, fragment, replace) {\r\n    if (replace) {\r\n      const href = location.href.replace(/(javascript:|#).*$/, '');\r\n      location.replace(`${href}#${fragment}`);\r\n    } else {\r\n      // Some browsers require that `hash` contains a leading #.\r\n      location.hash = `#${fragment}`;\r\n    }\r\n  }\r\n\r\n  // add some features to History\r\n\r\n  // a generic callback for any changes\r\n  onChange(callback) {\r\n    this.route(/^(.*?)$/, callback);\r\n  }\r\n\r\n  // checks if the browser has pushstate support\r\n  hasPushState() {\r\n    // MODIFICATION OF ORIGINAL BACKBONE.HISTORY\r\n    if (!this.started) {\r\n      throw new Error(\"only available after LocationBar.start()\");\r\n    }\r\n    return this._hasPushState;\r\n  }\r\n}\r\n\r\n// Cached regex for stripping a leading hash/slash and trailing space.\r\nconst routeStripper = /^[#\\/]|\\s+$/g;\r\n\r\n// Cached regex for stripping leading and trailing slashes.\r\nconst rootStripper = /^\\/+|\\/+$/g;\r\n\r\n// Cached regex for removing a trailing slash.\r\nconst trailingSlash = /\\/$/;\r\n\r\n// Cached regex for stripping urls of hash.\r\nconst pathStripper = /#.*$/;\r\n\r\n\r\n// export\r\nexport default History;\r\n","import { extend } from '../utils'\r\nimport LocationBar from './location-bar'\r\n\r\nclass BrowserLocation {\r\n  constructor (options = {}) {\r\n    this.path = options.path || ''\r\n\r\n    this.options = extend({\r\n      pushState: false,\r\n      root: '/'\r\n    }, options)\r\n\r\n    // we're using the location-bar module for actual\r\n    // URL management\r\n    this.locationBar = new LocationBar()\r\n    this.locationBar.onChange(path => {\r\n      this.handleURL(`/${path || ''}`)\r\n    })\r\n\r\n    this.locationBar.start(options)\r\n  }\r\n\r\n  /**\r\n   * Get the current URL\r\n   */\r\n\r\n  getURL () {\r\n    return this.path\r\n  }\r\n\r\n  /**\r\n   * Set the current URL without triggering any events\r\n   * back to the router. Add a new entry in browser's history.\r\n   */\r\n\r\n  setURL (path, options = {}) {\r\n    if (this.path !== path) {\r\n      this.path = path\r\n      this.locationBar.update(path, extend({ trigger: true }, options))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set the current URL without triggering any events\r\n   * back to the router. Replace the latest entry in broser's history.\r\n   */\r\n\r\n  replaceURL (path, options = {}) {\r\n    if (this.path !== path) {\r\n      this.path = path\r\n      this.locationBar.update(path, extend({ trigger: true, replace: true }, options))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Setup a URL change handler\r\n   * @param  {Function} callback\r\n   */\r\n  onChange (callback) {\r\n    this.changeCallback = callback\r\n  }\r\n\r\n  /**\r\n   * Given a path, generate a URL appending root\r\n   * if pushState is used and # if hash state is used\r\n   */\r\n  formatURL (path) {\r\n    if (this.locationBar.hasPushState()) {\r\n      let rootURL = this.options.root\r\n      if (path !== '') {\r\n        rootURL = rootURL.replace(/\\/$/, '')\r\n      }\r\n      return rootURL + path\r\n    } else {\r\n      if (path[0] === '/') {\r\n        path = path.substr(1)\r\n      }\r\n      return `#${path}`\r\n    }\r\n  }\r\n\r\n  /**\r\n   * When we use pushState with a custom root option,\r\n   * we need to take care of removingRoot at certain points.\r\n   * Specifically\r\n   * - browserLocation.update() can be called with the full URL by router\r\n   * - LocationBar expects all .update() calls to be called without root\r\n   * - this method is public so that we could dispatch URLs without root in router\r\n   */\r\n  removeRoot (url) {\r\n    if (this.options.pushState && this.options.root && this.options.root !== '/') {\r\n      return url.replace(this.options.root, '')\r\n    } else {\r\n      return url\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stop listening to URL changes and link clicks\r\n   */\r\n  destroy () {\r\n    this.locationBar.stop()\r\n  }\r\n\r\n  /**\r\n    initially, the changeCallback won't be defined yet, but that's good\r\n    because we dont' want to kick off routing right away, the router\r\n    does that later by manually calling this handleURL method with the\r\n    url it reads of the location. But it's important this is called\r\n    first by Backbone, because we wanna set a correct this.path value\r\n\r\n    @private\r\n   */\r\n  handleURL (url) {\r\n    this.path = url\r\n    if (this.changeCallback) {\r\n      this.changeCallback(url)\r\n    }\r\n  }\r\n}\r\n\r\nexport default BrowserLocation\r\n","import { extend } from '../utils'\r\n\r\nclass MemoryLocation {\r\n  constructor ({ path }) {\r\n    this.path = path || ''\r\n  }\r\n\r\n  getURL () {\r\n    return this.path\r\n  }\r\n\r\n  setURL (path, options) {\r\n    if (this.path !== path) {\r\n      this.path = path\r\n      this.handleURL(this.getURL(), options)\r\n    }\r\n  }\r\n\r\n  replaceURL (path, options) {\r\n    if (this.path !== path) {\r\n      this.setURL(path, options)\r\n    }\r\n  }\r\n\r\n  onChange (callback) {\r\n    this.changeCallback = callback\r\n  }\r\n\r\n  handleURL (url, options = {}) {\r\n    this.path = url\r\n    options = extend({ trigger: true }, options)\r\n    if (this.changeCallback && options.trigger) {\r\n      this.changeCallback(url)\r\n    }\r\n  }\r\n\r\n  removeRoot (url) {\r\n    return url\r\n  }\r\n\r\n  formatURL (url) {\r\n    return url\r\n  }\r\n}\r\n\r\nexport default MemoryLocation\r\n","export const TRANSITION_REDIRECTED = 'TransitionRedirected'\r\n\r\nexport const TRANSITION_CANCELLED = 'TransitionCancelled'\r\n","/* eslint-disable promise/param-names */\r\nimport { clone } from './utils'\r\nimport invariant from './invariant'\r\nimport { TRANSITION_CANCELLED, TRANSITION_REDIRECTED } from './constants'\r\n\r\nfunction runError (router, transition, err) {\r\n  router.middleware.forEach((m) => {\r\n    m.error && m.error(transition, err)\r\n  })\r\n}\r\n\r\nexport default function transition (options) {\r\n  options = options || {}\r\n\r\n  const router = options.router\r\n  const log = router.log\r\n  const logError = router.logError\r\n\r\n  const path = options.path\r\n  const match = options.match\r\n  const routes = match.routes\r\n  const params = match.params\r\n  const pathname = match.pathname\r\n  const query = match.query\r\n\r\n  const id = options.id\r\n  const startTime = Date.now()\r\n  log('---')\r\n  log('Transition #' + id, 'to', path)\r\n  log('Transition #' + id, 'routes:', routes.map(r => r.name))\r\n  log('Transition #' + id, 'params:', params)\r\n  log('Transition #' + id, 'query:', query)\r\n\r\n  // create the transition promise\r\n  let resolve, reject\r\n  const promise = new Promise(function (res, rej) {\r\n    resolve = res\r\n    reject = rej\r\n  })\r\n\r\n  // 1. make transition errors loud\r\n  // 2. by adding this handler we make sure\r\n  //    we don't trigger the default 'Potentially\r\n  //    unhandled rejection' for cancellations\r\n  promise.then(function () {\r\n    log('Transition #' + id, 'completed in', (Date.now() - startTime) + 'ms')\r\n  }).catch(function (err) {\r\n    if (err.type !== TRANSITION_REDIRECTED && err.type !== TRANSITION_CANCELLED) {\r\n      log('Transition #' + id, 'FAILED')\r\n      logError(err)\r\n    }\r\n  })\r\n\r\n  let cancelled = false\r\n\r\n  const transition = {\r\n    id: id,\r\n    prev: {\r\n      routes: clone(router.state.routes) || [],\r\n      path: router.state.path || '',\r\n      pathname: router.state.pathname || '',\r\n      params: clone(router.state.params) || {},\r\n      query: clone(router.state.query) || {}\r\n    },\r\n    routes: clone(routes),\r\n    path: path,\r\n    pathname: pathname,\r\n    params: clone(params),\r\n    query: clone(query),\r\n    redirectTo: function (...args) {\r\n      return router.transitionTo(...args)\r\n    },\r\n    retry: function () {\r\n      return router.transitionTo(path)\r\n    },\r\n    cancel: function (err) {\r\n      if (router.state.activeTransition !== transition) {\r\n        return\r\n      }\r\n\r\n      if (transition.isCancelled) {\r\n        return\r\n      }\r\n\r\n      router.state.activeTransition = null\r\n      transition.isCancelled = true\r\n      cancelled = true\r\n\r\n      if (!err) {\r\n        err = new Error(TRANSITION_CANCELLED)\r\n        err.type = TRANSITION_CANCELLED\r\n      }\r\n      if (err.type === TRANSITION_CANCELLED) {\r\n        log('Transition #' + id, 'cancelled')\r\n      }\r\n      if (err.type === TRANSITION_REDIRECTED) {\r\n        log('Transition #' + id, 'redirected')\r\n      }\r\n\r\n      router.middleware.forEach((m) => {\r\n        m.cancel && m.cancel(transition, err)\r\n      })\r\n      reject(err)\r\n    },\r\n    followRedirects: function () {\r\n      return promise.catch(function (reason) {\r\n        if (router.state.activeTransition) {\r\n          return router.state.activeTransition.followRedirects()\r\n        }\r\n        return Promise.reject(reason)\r\n      })\r\n    },\r\n\r\n    then: promise.then.bind(promise),\r\n    catch: promise.catch.bind(promise)\r\n  }\r\n\r\n  router.middleware.forEach((m) => {\r\n    m.before && m.before(transition)\r\n  })\r\n\r\n  // here we handle calls to all of the middlewares\r\n  function callNext (i, prevResult) {\r\n    let middleware\r\n    let middlewareName\r\n    // if transition has been cancelled - nothing left to do\r\n    if (cancelled) {\r\n      return\r\n    }\r\n    // done\r\n    if (i < router.middleware.length) {\r\n      middleware = router.middleware[i]\r\n      middlewareName = middleware.name || 'anonymous'\r\n      log('Transition #' + id, 'resolving middleware:', middlewareName)\r\n      let middlewarePromise\r\n      try {\r\n        middlewarePromise = middleware.resolve ? middleware.resolve(transition, prevResult) : prevResult\r\n        invariant(transition !== middlewarePromise, 'Middleware %s returned a transition which resulted in a deadlock', middlewareName)\r\n      } catch (err) {\r\n        router.state.activeTransition = null\r\n        runError(router, transition, err)\r\n        return reject(err)\r\n      }\r\n      Promise.resolve(middlewarePromise)\r\n        .then(function (result) {\r\n          callNext(i + 1, result)\r\n        })\r\n        .catch(function (err) {\r\n          log('Transition #' + id, 'resolving middleware:', middlewareName, 'FAILED')\r\n          router.state.activeTransition = null\r\n          runError(router, transition, err)\r\n          reject(err)\r\n        })\r\n    } else {\r\n      router.state = {\r\n        activeTransition: null,\r\n        routes,\r\n        path,\r\n        pathname,\r\n        params,\r\n        query\r\n      }\r\n      router.middleware.forEach((m) => {\r\n        m.done && m.done(transition)\r\n      })\r\n      resolve()\r\n    }\r\n  }\r\n\r\n  if (!options.noop) {\r\n    Promise.resolve().then(() => callNext(0))\r\n  } else {\r\n    resolve()\r\n  }\r\n\r\n  if (options.noop) {\r\n    transition.noop = true\r\n  }\r\n\r\n  return transition\r\n}\r\n","import { bindEvent, unbindEvent } from './events'\r\n\r\n/**\r\n * Handle link delegation on `el` or the document,\r\n * and invoke `fn(e)` when clickable.\r\n *\r\n * @param {Element} el\r\n * @param {Function} fn\r\n * @api public\r\n */\r\n\r\nexport function intercept (el, fn) {\r\n  const cb = delegate(el, 'click', function (e, el) {\r\n    if (clickable(e, el)) fn(e, el)\r\n  })\r\n\r\n  return function dispose () {\r\n    undelegate(el, 'click', cb)\r\n  }\r\n}\r\n\r\nfunction link (element) {\r\n  element = { parentNode: element }\r\n\r\n  const root = document\r\n\r\n  // Make sure `element !== document` and `element != null`\r\n  // otherwise we get an illegal invocation\r\n  while ((element = element.parentNode) && element !== document) {\r\n    if (element.tagName.toLowerCase() === 'a') {\r\n      return element\r\n    }\r\n    // After `matches` on the edge case that\r\n    // the selector matches the root\r\n    // (when the root is not the document)\r\n    if (element === root) {\r\n      return\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Delegate event `type` to links\r\n * and invoke `fn(e)`. A callback function\r\n * is returned which may be passed to `.unbind()`.\r\n *\r\n * @param {Element} el\r\n * @param {String} selector\r\n * @param {String} type\r\n * @param {Function} fn\r\n * @param {Boolean} capture\r\n * @return {Function}\r\n * @api public\r\n */\r\n\r\nfunction delegate (el, type, fn) {\r\n  return bindEvent(el, type, function (e) {\r\n    const target = e.target || e.srcElement\r\n    const el = link(target)\r\n    if (el) {\r\n      fn(e, el)\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * Unbind event `type`'s callback `fn`.\r\n *\r\n * @param {Element} el\r\n * @param {String} type\r\n * @param {Function} fn\r\n * @param {Boolean} capture\r\n * @api public\r\n */\r\n\r\nfunction undelegate (el, type, fn) {\r\n  unbindEvent(el, type, fn)\r\n}\r\n\r\n/**\r\n * Check if `e` is clickable.\r\n */\r\n\r\nfunction clickable (e, el) {\r\n  if (which(e) !== 1) return\r\n  if (e.metaKey || e.ctrlKey || e.shiftKey) return\r\n  if (e.defaultPrevented) return\r\n\r\n  // check target\r\n  if (el.target) return\r\n\r\n  // check for data-bypass attribute\r\n  if (el.getAttribute('data-bypass') !== null) return\r\n\r\n  // inspect the href\r\n  const href = el.getAttribute('href')\r\n  if (!href || href.length === 0) return\r\n  // don't handle hash links\r\n  if (href[0] === '#') return\r\n  // external/absolute links\r\n  if (href.indexOf('http://') === 0 || href.indexOf('https://') === 0) return\r\n  // email links\r\n  if (href.indexOf('mailto:') === 0) return\r\n  // don't intercept javascript links\r\n  /* eslint-disable no-script-url */\r\n  if (href.indexOf('javascript:') === 0) return\r\n  /* eslint-enable no-script-url */\r\n\r\n  return true\r\n}\r\n\r\n/**\r\n * Event button.\r\n */\r\n\r\nfunction which (e) {\r\n  e = e || window.event\r\n  return e.which === null ? e.button : e.which\r\n}\r\n","export default function defineLogger (router, method, fn) {\r\n  if (fn === true) return\r\n  router[method] = typeof fn === 'function' ? fn : () => {}\r\n}\r\n","export default {\r\n  parse (querystring) {\r\n    return querystring.split('&').reduce((acc, pair) => {\r\n      const parts = pair.split('=')\r\n      acc[parts[0]] = decodeURIComponent(parts[1])\r\n      return acc\r\n    }, {})\r\n  },\r\n\r\n  stringify (params) {\r\n    return Object.keys(params).reduce((acc, key) => {\r\n      if (params[key] !== undefined) {\r\n        acc.push(key + '=' + encodeURIComponent(params[key]))\r\n      }\r\n      return acc\r\n    }, []).join('&')\r\n  }\r\n}\r\n","import { pick, clone, extend, isEqual, keys } from './utils'\r\nimport functionDsl from './function-dsl'\r\nimport arrayDsl from './array-dsl'\r\nimport { withQuery, withoutQuery, injectParams, extractParams, extractParamNames, extractQuery } from './path'\r\nimport invariant from './invariant'\r\nimport BrowserLocation from './locations/browser'\r\nimport MemoryLocation from './locations/memory'\r\nimport transition from './transition'\r\nimport { intercept } from './links'\r\nimport defineLogger from './logger'\r\nimport qs from './qs'\r\nimport { TRANSITION_CANCELLED, TRANSITION_REDIRECTED } from './constants'\r\n\r\nclass Router {\r\n  constructor (options = {}) {\r\n    this.nextId = 1\r\n    this.state = {}\r\n    this.middleware = []\r\n    this.options = extend({\r\n      location: 'browser',\r\n      logError: true,\r\n      qs\r\n    }, options)\r\n    defineLogger(this, 'log', this.options.log)\r\n    defineLogger(this, 'logError', this.options.logError)\r\n    if (options.routes) {\r\n      this.map(options.routes)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add a middleware\r\n   * @param  {Function} middleware\r\n   * @return {Object}   router\r\n   * @api public\r\n   */\r\n  use (middleware, options = {}) {\r\n    const m = typeof middleware === 'function' ? { resolve: middleware } : middleware\r\n    typeof options.at === 'number' ? this.middleware.splice(options.at, 0, m) : this.middleware.push(m)\r\n    m.create && m.create(this)\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * Add the route map\r\n   * @param  {Function} routes\r\n   * @return {Object}   router\r\n   * @api public\r\n   */\r\n  map (routes) {\r\n    // create the route tree\r\n    this.routes = Array.isArray(routes) ? arrayDsl(routes) : functionDsl(routes)\r\n\r\n    // create the matcher list, which is like a flattened\r\n    // list of routes = a list of all branches of the route tree\r\n    const matchers = this.matchers = []\r\n    // keep track of whether duplicate paths have been created,\r\n    // in which case we'll warn the dev\r\n    const dupes = {}\r\n    // keep track of abstract routes to build index route forwarding\r\n    const abstracts = {}\r\n\r\n    eachBranch({ routes: this.routes }, [], routes => {\r\n      // concatenate the paths of the list of routes\r\n      let path = routes.reduce((memo, r) => // reset if there's a leading slash, otherwise concat\r\n      // and keep resetting the trailing slash\r\n        (r.path[0] === '/' ? r.path : `${memo}/${r.path}`).replace(/\\/$/, ''), '')\r\n      // ensure we have a leading slash\r\n      if (path === '') {\r\n        path = '/'\r\n      }\r\n\r\n      const lastRoute = routes[routes.length - 1]\r\n\r\n      if (lastRoute.options.abstract) {\r\n        abstracts[path] = lastRoute.name\r\n        return\r\n      }\r\n\r\n      if (lastRoute.path === '') {\r\n        let matcher\r\n        matchers.some(m => {\r\n          if (m.path === path) {\r\n            matcher = m\r\n            return true\r\n          }\r\n        })\r\n\r\n        if (matcher) {\r\n          // remap the matcher of a parent route\r\n          matcher.routes = routes\r\n        } else if (abstracts[path]) {\r\n          matchers.push({\r\n            routes,\r\n            name: abstracts[path],\r\n            path\r\n          })\r\n        }\r\n      }\r\n\r\n      // register routes\r\n      matchers.push({\r\n        routes,\r\n        name: lastRoute.name,\r\n        path\r\n      })\r\n\r\n      // dupe detection\r\n      if (dupes[path] && lastRoute.path !== '') {\r\n        throw new Error(`Routes ${dupes[path]} and ${lastRoute.name} have the same url path '${path}'`)\r\n      }\r\n      dupes[path] = lastRoute.name\r\n    })\r\n\r\n    function eachBranch (node, memo, fn) {\r\n      node.routes.forEach(route => {\r\n        fn(memo.concat(route))\r\n\r\n        if (route.routes.length) {\r\n          eachBranch(route, memo.concat(route), fn)\r\n        }\r\n      })\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * Starts listening to the location changes.\r\n   * @param  {Object}  location (optional)\r\n   * @return {Promise} initial transition\r\n   *\r\n   * @api public\r\n   */\r\n  listen (path) {\r\n    const location = this.location = this.createLocation(path || '')\r\n    // setup the location onChange handler\r\n    location.onChange((url) => {\r\n      const previousUrl = this.state.path\r\n      this.dispatch(url).catch((err) => {\r\n        if (err && err.type === TRANSITION_CANCELLED) {\r\n          // reset the URL in case the transition has been cancelled\r\n          this.location.replaceURL(previousUrl, { trigger: false })\r\n        }\r\n        return err\r\n      })\r\n    })\r\n    // and also kick off the initial transition\r\n    return this.dispatch(location.getURL())\r\n  }\r\n\r\n  /**\r\n   * Transition to a different route. Passe in url or a route name followed by params and query\r\n   * @param  {String} url     url or route name\r\n   * @param  {Object} params  Optional\r\n   * @param  {Object} query   Optional\r\n   * @return {Object}         transition\r\n   *\r\n   * @api public\r\n   */\r\n  transitionTo (name, params, query) {\r\n    if (this.state.activeTransition) {\r\n      return this.replaceWith(name, params, query)\r\n    }\r\n    return this.doTransition('setURL', name, params, query)\r\n  }\r\n\r\n  /**\r\n   * Like transitionTo, but doesn't leave an entry in the browser's history,\r\n   * so clicking back will skip this route\r\n   * @param  {String} url     url or route name followed by params and query\r\n   * @param  {Object} params  Optional\r\n   * @param  {Object} query   Optional\r\n   * @return {Object}         transition\r\n   *\r\n   * @api public\r\n   */\r\n  replaceWith (name, params, query) {\r\n    return this.doTransition('replaceURL', name, params, query)\r\n  }\r\n\r\n  /**\r\n   * Create an href\r\n   * @param  {String} name   target route name\r\n   * @param  {Object} params\r\n   * @param  {Object} query\r\n   * @return {String}        href\r\n   *\r\n   * @api public\r\n   */\r\n  generate (name, params, query) {\r\n    invariant(this.location, 'call .listen() before using .generate()')\r\n    let matcher\r\n\r\n    query = query || {}\r\n\r\n    this.matchers.forEach(m => {\r\n      if (m.name === name) {\r\n        matcher = m\r\n      }\r\n    })\r\n\r\n    if (!matcher) {\r\n      throw new Error(`No route is named ${name}`)\r\n    }\r\n\r\n    const url = withQuery(this.options.qs, injectParams(matcher.path, params), query)\r\n    return this.location.formatURL(url)\r\n  }\r\n\r\n  /**\r\n   * Stop listening to URL changes\r\n   * @api public\r\n   */\r\n  destroy () {\r\n    if (this.location && this.location.destroy) {\r\n      this.location.destroy()\r\n    }\r\n    if (this.state.activeTransition) {\r\n      this.state.activeTransition.cancel()\r\n    }\r\n    this.state = {}\r\n    this.middleware.forEach(m => {\r\n      m.destroy && m.destroy(this)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Check if the given route/params/query combo is active\r\n   * @param  {String} name   target route name\r\n   * @param  {Object} params\r\n   * @param  {Object} query\r\n   * @return {Boolean}\r\n   *\r\n   * @api public\r\n   */\r\n  isActive (name, params, query, exact) {\r\n    const activeRoutes = this.state.routes || []\r\n    const activeParams = this.state.params\r\n    const activeQuery = this.state.query\r\n\r\n    let isActive = activeRoutes.some(route => route.name === name) &&\r\n      (!exact || activeRoutes[activeRoutes.length - 1].name === name)\r\n    isActive = isActive && (!params || keys(params).every(key => activeParams[key] === params[key]))\r\n    isActive = isActive && (!query || keys(query).every(key => activeQuery[key] === query[key]))\r\n\r\n    return isActive\r\n  }\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  doTransition (method, name, params, query) {\r\n    const previousUrl = this.location.getURL()\r\n\r\n    let url = name\r\n    if (url[0] !== '/') {\r\n      url = this.generate(name, params, query)\r\n      url = url.replace(/^#/, '/')\r\n    }\r\n\r\n    if (this.options.pushState) {\r\n      url = this.location.removeRoot(url)\r\n    }\r\n\r\n    const transition = this.dispatch(url)\r\n\r\n    transition.catch((err) => {\r\n      if (err && err.type === TRANSITION_CANCELLED) {\r\n        // reset the URL in case the transition has been cancelled\r\n        this.location.replaceURL(previousUrl, { trigger: false })\r\n      }\r\n      return err\r\n    })\r\n\r\n    this.location[method](url, { trigger: false })\r\n\r\n    return transition\r\n  }\r\n\r\n  /**\r\n   * Match the path against the routes\r\n   * @param  {String} path\r\n   * @return {Object} the list of matching routes and params\r\n   *\r\n   * @api private\r\n   */\r\n  match (path) {\r\n    path = (path || '').replace(/\\/$/, '') || '/'\r\n    let params\r\n    let routes = []\r\n    const pathWithoutQuery = withoutQuery(path)\r\n    const qs = this.options.qs\r\n    this.matchers.some(matcher => {\r\n      params = extractParams(matcher.path, pathWithoutQuery)\r\n      if (params) {\r\n        routes = matcher.routes\r\n        return true\r\n      }\r\n    })\r\n    return {\r\n      routes: routes.map(descriptor),\r\n      params: params || {},\r\n      pathname: pathWithoutQuery,\r\n      query: extractQuery(qs, path) || {}\r\n    }\r\n\r\n    // clone the data (only a shallow clone of options)\r\n    // to make sure the internal route store is not mutated\r\n    // by the middleware. The middleware can mutate data\r\n    // before it gets passed into the resolve middleware, but\r\n    // only within the same transition. New transitions\r\n    // will get to use pristine data.\r\n    function descriptor (route) {\r\n      return {\r\n        name: route.name,\r\n        path: route.path,\r\n        params: pick(params, extractParamNames(route.path)),\r\n        options: clone(route.options)\r\n      }\r\n    }\r\n  }\r\n\r\n  dispatch (path) {\r\n    const match = this.match(path)\r\n    const query = match.query\r\n    const pathname = match.pathname\r\n\r\n    const activeTransition = this.state.activeTransition\r\n\r\n    // if we already have an active transition with all the same\r\n    // params - return that and don't do anything else\r\n    if (activeTransition &&\r\n        activeTransition.pathname === pathname &&\r\n        isEqual(activeTransition.query, query)) {\r\n      return activeTransition\r\n    }\r\n\r\n    // otherwise, cancel the active transition since we're\r\n    // redirecting (or initiating a brand new transition)\r\n    if (activeTransition) {\r\n      const err = new Error(TRANSITION_REDIRECTED)\r\n      err.type = TRANSITION_REDIRECTED\r\n      err.nextPath = path\r\n      activeTransition.cancel(err)\r\n    }\r\n\r\n    // if there is no active transition, check if\r\n    // this is a noop transition, in which case, return\r\n    // a transition to respect the function signature,\r\n    // but don't actually run any of the middleware\r\n    if (!activeTransition) {\r\n      if (this.state.pathname === pathname &&\r\n          isEqual(this.state.query, query)) {\r\n        return transition({\r\n          id: this.nextId++,\r\n          path,\r\n          match,\r\n          noop: true,\r\n          router: this\r\n        })\r\n      }\r\n    }\r\n\r\n    const t = transition({\r\n      id: this.nextId++,\r\n      path,\r\n      match,\r\n      router: this\r\n    })\r\n\r\n    this.state.activeTransition = t\r\n\r\n    return t\r\n  }\r\n\r\n  /**\r\n   * Create the default location.\r\n   * This is used when no custom location is passed to\r\n   * the listen call.\r\n   * @return {Object} location\r\n   *\r\n   * @api private\r\n   */\r\n  createLocation (path) {\r\n    const location = this.options.location\r\n    if (typeof location !== 'string') {\r\n      return location\r\n    }\r\n    if (location === 'browser') {\r\n      return new BrowserLocation(pick(this.options, ['pushState', 'root']))\r\n    } else if (location === 'memory') {\r\n      return new MemoryLocation({ path })\r\n    } else {\r\n      throw new Error('Location can be `browser`, `memory` or a custom implementation')\r\n    }\r\n  }\r\n\r\n  log (...args) {\r\n    console.info(...args)\r\n  }\r\n\r\n  logError (...args) {\r\n    console.error(...args)\r\n  }\r\n}\r\n\r\nfunction defaultClickHandler (event, link, router) {\r\n  event.preventDefault()\r\n  router.transitionTo(router.location.removeRoot(link.getAttribute('href')))\r\n}\r\n\r\n/**\r\n * Helper to intercept links when using pushState but server is not configured for it\r\n * Link clicks are handled via the router avoiding browser page reload\r\n */\r\nfunction interceptLinks (router, el = document, clickHandler = defaultClickHandler) {\r\n  return intercept(el, (event, link) => clickHandler(event, link, router))\r\n}\r\n\r\nexport { Router, interceptLinks }\r\n"],"names":["LocationBar"],"mappings":"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"}